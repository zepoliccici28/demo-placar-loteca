<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo Placar ao Vivo — LOTECA</title>
  <meta name="description" content="Demo de placar ao vivo para lotecaonline.com.br com atualização automática.">
  <style>
    :root { font-family: system-ui, Roboto, Arial, sans-serif; }
    body { margin: 0; background: #0f172a; color: #e2e8f0; }
    a { color: #93c5fd; }

    .topbar { display:flex; gap:.75rem; align-items:center; padding:16px 20px; background:#111827; border-bottom:1px solid #1f2937; }
    h1 { margin:0; font-size:1.25rem; }
    .badge { background:#1d4ed8; padding:2px 8px; border-radius:999px; font-size:.75rem; }

    .card { margin:20px; padding:16px; background:#111827; border:1px solid #1f2937; border-radius:16px; }
    .note { opacity:.85; margin:.5rem 0 1rem; }

    .btn {
      display:inline-block; padding:10px 14px; border-radius:10px;
      border:1px solid #1f2937; background:#1d4ed8; color:#fff;
      text-decoration:none; font-weight:600;
    }
    .btn:hover { filter:brightness(1.05); }

    .matches { list-style:none; padding:0; margin:0; display:grid; gap:12px; }
    .match { display:flex; justify-content:space-between; align-items:center; gap:10px;
             padding:12px 14px; background:#0b1220; border:1px solid #1f2937; border-radius:12px; }
    .team { display:flex; gap:8px; align-items:center; }
    .team .name { font-weight:600; }
    .score { font-size:1.25rem; font-weight:700; min-width:72px; text-align:center; }
    .status { font-size:.85rem; opacity:.85; }
    .last-update { margin-top:10px; font-size:.85rem; opacity:.75; }
    .footer { padding:20px; text-align:center; opacity:.7; }

    @media (min-width:700px){
      .matches { grid-template-columns: repeat(2,minmax(0,1fr)); }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <h1>Placar ao Vivo (Demo)</h1>
    <span class="badge">versão demo</span>
  </header>

  <!-- Sem iframe: cartão limpo com CTA para abrir o site oficial -->
  <section class="card">
    <h2>Placar oficial</h2>
    <p class="note">
      O site oficial não permite ser exibido dentro de outros sites. Clique abaixo para abrir em nova aba:
    </p>
    <p>
      <a class="btn" href="https://www.lotecaonline.com.br/" target="_blank" rel="noopener">
        Abrir placar oficial
      </a>
    </p>
  </section>

  <!-- Lista que será atualizada pelo JS (mock ou API) -->
  <section class="card">
    <h2>Lista de partidas (Atualiza a cada 30s)</h2>
    <ul id="matches" class="matches"></ul>
    <div id="last-update" class="last-update"></div>
  </section>

  <footer class="footer">
    <small>Demo para <a href="https://www.lotecaonline.com.br/" target="_blank" rel="noreferrer">lotecaonline.com.br</a></small>
  </footer>

  <script>
    // ===== CONFIG =====
    // Quando tiver um endpoint (Cloudflare Worker/API), defina USE_WORKER = true
    // e coloque a URL no WORKER_URL.
    const USE_WORKER = false;
    const WORKER_URL = "https://SEU-WORKER.cloudflare.workers.dev/placar"; // ajuste quando for usar API
    const REFRESH_MS = 30_000;

    // ===== MOCK (para demo imediata) =====
    const mock = [
      { home:"Flamengo-RJ", away:"Palmeiras-SP", scoreHome:1, scoreAway:0, minute:"34'", status:"1ºT" },
      { home:"Internacional-RS", away:"Sport-PE", scoreHome:0, scoreAway:0, minute:"INT", status:"Intervalo" },
      { home:"Corinthians-SP", away:"Atlético-MG", scoreHome:2, scoreAway:2, minute:"—", status:"Final" },
      { home:"Cruzeiro-MG", away:"Fortaleza-CE", scoreHome:0, scoreAway:0, minute:"—", status:"Hoje 20:00" }
    ];

    const elList = document.getElementById("matches");
    const elLast = document.getElementById("last-update");

    function render(matches){
      elList.innerHTML = "";
      matches.forEach(m=>{
        const li = document.createElement("li");
        li.className = "match";
        li.innerHTML = `
          <div class="team"><span class="name">${m.home}</span></div>
          <div class="score">${m.scoreHome} - ${m.scoreAway}</div>
          <div class="team"><span class="name">${m.away}</span></div>
          <div class="status">${m.status}${m.minute ? " • " + m.minute : ""}</div>
        `;
        elList.appendChild(li);
      });
      elLast.textContent = "Atualizado: " + new Date().toLocaleTimeString();
    }

    async function load(){
      try{
        if (USE_WORKER) {
          const res = await fetch(WORKER_URL, { cache:"no-store" });
          const data = await res.json(); // esperado: [{home, away, scoreHome, scoreAway, minute, status}]
          render(data);
        } else {
          render(mock);
        }
      } catch(e){
        console.error(e);
        render(mock);
      }
    }

    load();
    setInterval(load, REFRESH_MS);
  </script>
</body>
</html>
